{% extends "base.html" %}
{% load partials %}
{% block head %}
    {% add_style 'circle_of_suck.css' %}
    {% add_script 'circle_of_suck.js' %}
    <script class="season-information">
        window.allGames = {{ all_games|safe|default:"null" }};
        window.allSchools = {{ all_schools|safe|default:"null" }};
    </script>
{% endblock %}

{% block header %}
    <div class="dropdowns">
        <select class='conference'> 
            <option></option>
            {% for id, conference in conferences.items %}
                <option value="{{id}}" {% if id == current_conference %}selected="selected"{% endif %}>{{conference.name}}</option>
            {% endfor %}
        </select>
    </div>
{% endblock %}

{% block content %}
    <div class='year'>
        <a class="decrement" href="#"></a>
        <span>{{ year }}</span>
        <a class="increment" href="#"></a>
    </div>
    {% if not season %}
        <p class="no-stats">The given conference does not have any stats for the season.</p>
    {% else %}
        <div class='suck-graph graph'>
            {% for circle_of_suck in circles_of_suck %}
                <svg class="school-group circle-of-suck">
                    <defs>
                        <marker id="head" orient="auto" markerWidth="4" markerHeight="6" refX="2" refY="3">
                            <path d="M1,1 L3,3 L1,5"></path>
                        </marker>
                    </defs>
                    {% for school in circle_of_suck %}
                        {% make_school school %}
                        <g class="arrow">
                            <path class="arrow-body" marker-end="url(#head)"></path>
                            <line></line>
                        </g>
                    {% endfor %}
                </svg>
            {% endfor %}
            {% if extra_schools %}
                <div class="school-group extra-schools">
                    {% for school in extra_schools %}
                        {% make_school school %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="full-graph graph">
            <svg>
                <defs>
                    <marker id="head" orient="auto" markerWidth="4" markerHeight="6" refX="2" refY="3">
                        <path d="M1,1 L3,3 L1,5"></path>
                    </marker>
                </defs>
            </svg>
        </div>
        <div class='school-box box'>
            <span class="school-name"></span>&nbsp;
            <span class="record"></span>
        </div>
        <div class='game-box box'>
            <p class="date"></p>
            <p class='score-box winner'> 
                <span class="logo"><img src=""></span>
                <span class='score'></span>
            </p> 
            <p class='score-box loser'>
                <span class="logo"><img src=""></span>
                <span class='score'></span>
            </p>
        </div>
        <button type='button' class='toggle-graph'>Full Graph</button>
    {% endif %}
{% endblock %}
